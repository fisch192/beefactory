---
import type { Lang } from '../lib/i18n';
import { t } from '../lib/i18n';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;

const seasons = [
  {
    key:    'spring',
    num:    '01',
    months: lang === 'de' ? 'März – Mai' : 'Marzo – Maggio',
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 22V8"/><path d="M5 12H2a10 10 0 0020 0h-3"/><path d="M8 5.2A4 4 0 0112 2a4 4 0 014 3.2"/></svg>`,
  },
  {
    key:    'summer',
    num:    '02',
    months: lang === 'de' ? 'Juni – Aug.' : 'Giugno – Ago.',
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>`,
  },
  {
    key:    'autumn',
    num:    '03',
    months: lang === 'de' ? 'Sept. – Nov.' : 'Sett. – Nov.',
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M11 20A7 7 0 019.8 6.9C15.5 4.9 17 3.1 17 3.1s.1 3.1-2 7.1A7 7 0 0111 20z"/><path d="M11 20V8"/></svg>`,
  },
  {
    key:    'winter',
    num:    '04',
    months: lang === 'de' ? 'Dez. – Feb.' : 'Dic. – Feb.',
    icon: `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><line x1="2" y1="12" x2="22" y2="12"/><line x1="12" y1="2" x2="12" y2="22"/><line x1="20" y1="16" x2="4" y2="8"/><line x1="20" y1="8" x2="4" y2="16"/></svg>`,
  },
];
---

<section class="seasonal-section">
  <div class="container-wide">

    <!-- Header -->
    <div class="seasonal-header fade-in">
      <span class="eyebrow">{lang === 'de' ? 'Imker-Kalender' : 'Calendario Apicoltore'}</span>
      <h2 class="display-md mt-4">{t('seasonal.title', lang)}</h2>
      <p class="seasonal-subtitle">{t('seasonal.subtitle', lang)}</p>
    </div>

    <!-- Cards -->
    <div class="seasonal-grid">
      {seasons.map((s, i) => (
        <div class="season-card fade-in">
          <div class="season-top">
            <span class="season-num">{s.num}</span>
            <div class="season-icon" set:html={s.icon} />
          </div>
          <div class="season-months">{s.months}</div>
          <h3 class="season-title">{t(`seasonal.${s.key}.title`, lang)}</h3>
          <p class="season-text">{t(`seasonal.${s.key}.text`, lang)}</p>
          <div class="season-bar">
            <div class="season-bar-fill" style={`width: ${25 * (i + 1)}%`}></div>
          </div>
        </div>
      ))}
    </div>

  </div>
</section>

<style>
  .seasonal-section {
    background:     var(--color-cream);
    padding-top:    clamp(5rem, 10vw, 12rem);
    padding-bottom: clamp(5rem, 10vw, 12rem);
  }

  .seasonal-header {
    text-align:    center;
    margin-bottom: clamp(3rem, 6vw, 5rem);
  }

  .seasonal-subtitle {
    font-size:     1rem;
    color:         var(--color-ash);
    margin-top:    1rem;
    line-height:   1.6;
  }

  /* Grid */
  .seasonal-grid {
    display:               grid;
    grid-template-columns: 1fr;
    gap:                   1px;
    background:            var(--color-warm-dark);
    border:                1px solid var(--color-warm-dark);
  }
  @media (min-width: 640px)  { .seasonal-grid { grid-template-columns: repeat(2, 1fr); } }
  @media (min-width: 1024px) { .seasonal-grid { grid-template-columns: repeat(4, 1fr); } }

  /* Card */
  .season-card {
    background:  var(--color-cream);
    padding:     2.25rem 2rem 2rem;
    display:     flex;
    flex-direction: column;
    gap:         0.75rem;
    transition:  background 0.25s;
  }
  .season-card:hover { background: white; }

  .season-top {
    display:         flex;
    align-items:     center;
    justify-content: space-between;
    margin-bottom:   0.5rem;
  }

  .season-num {
    font-family:    var(--font-display);
    font-size:      2.5rem;
    font-weight:    300;
    color:          var(--color-warm-dark);
    line-height:    1;
  }

  .season-icon {
    color:   var(--color-gold);
    opacity: 0.8;
  }

  .season-months {
    font-size:      0.6875rem;
    font-weight:    500;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    color:          var(--color-gold);
  }

  .season-title {
    font-size:   1.0625rem;
    font-weight: 600;
    color:       var(--color-ink);
    line-height: 1.3;
  }

  .season-text {
    font-size:   0.875rem;
    color:       var(--color-ash);
    line-height: 1.6;
    flex:        1;
  }

  /* Progress bar */
  .season-bar {
    height:     2px;
    background: var(--color-warm);
    margin-top: 1rem;
    overflow:   hidden;
  }
  .season-bar-fill {
    height:     100%;
    background: linear-gradient(90deg, var(--color-gold-dim), var(--color-gold));
    transition: width 0.8s cubic-bezier(0.16, 1, 0.3, 1) 0.3s;
  }
</style>
