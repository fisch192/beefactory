---
import type { Lang } from '../lib/i18n';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const prefix = `/${lang}`;
const neuimkerPath = lang === 'de' ? 'neuimker' : 'nuovi-apicoltori';
const catSlug      = lang === 'de' ? 'kategorien' : 'categorie';

const headline = lang === 'de'
  ? { line1: 'Die Kunst der', em: 'Imkerei.', line3: 'Meisterhaft.' }
  : { line1: "L'Arte dell'", em: 'Apicoltura.', line3: 'Perfezionata.' };

const ctaPrimary   = lang === 'de' ? 'Sortiment entdecken' : 'Scopri il catalogo';
const ctaSecondary = lang === 'de' ? 'Einsteiger-Guide'    : 'Guida principianti';
const subtitle     = lang === 'de'
  ? 'Professionelle Imkerei-Ausrüstung für Einsteiger und erfahrene Imker in der Alpenregion.'
  : 'Attrezzatura apistica professionale per principianti ed esperti in tutta la regione alpina.';

const stats = lang === 'de'
  ? [{ val: '500+', label: 'Kunden' }, { val: '50+', label: 'Produkte' }, { val: '5 ★', label: 'Bewertung' }]
  : [{ val: '500+', label: 'Clienti' }, { val: '50+', label: 'Prodotti' }, { val: '5 ★', label: 'Valutazione' }];
---

<section class="hero-section">

  <!-- ── Macro Photography Background ───────────────────────────── -->
  <div class="hero-bg" aria-hidden="true">
    <div class="absolute inset-0 bg-void/60 z-10 mix-blend-multiply"></div>
    <div class="absolute inset-0 bg-gradient-to-t from-void via-void/40 to-transparent z-20"></div>
    <img src="/images/background.png" alt="Beekeeping Background" class="w-full h-full object-cover opacity-80" />
  </div>

  <!-- ── Floating Bee Animation ───────────────────────────── -->
  <div class="hero-flying-bee" aria-hidden="true">
    <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--color-amber)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M7 6c-2.8 0-5 2.2-5 5v5c0 2.8 2.2 5 5 5h10c2.8 0 5-2.2 5-5v-5c0-2.8-2.2-5-5-5H7Z"></path>
      <path d="M12 2v4"></path>
      <path d="M8 2v4"></path>
      <path d="M16 2v4"></path>
      <path d="M4 11h16"></path>
      <path d="M4 16h16"></path>
      <path d="M12 21v2"></path>
      <!-- wings -->
      <path d="M16 11c3 0 5-2 5-5C21 3 18 2 16 2c-2 0-3 2-3 4"></path>
      <path d="M8 11c-3 0-5-2-5-5C3 3 6 2 8 2c2 0 3 2 3 4"></path>
    </svg>
  </div>

  <!-- ── Content ──────────────────────────────────── -->
  <div class="hero-body relative z-30">

    <!-- Headline -->
    <h1 class="hero-headline hi-1">
      {headline.line1}<br/>
      <em class="hero-em">{headline.em}</em><br/>
      <span class="hero-line3">{headline.line3}</span>
    </h1>

    <!-- Subtitle (JetBrains Mono) -->
    <p class="hero-subtitle hi-2 font-mono">
      {subtitle}
    </p>

    <!-- CTAs -->
    <div class="hero-ctas hi-3">
      <a href={`${prefix}/${catSlug}/startersets`} class="btn-primary">
        {ctaPrimary}
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="square" stroke-linejoin="miter">
          <polyline points="9 18 15 12 9 6"/>
        </svg>
      </a>
      <a href={`${prefix}/${neuimkerPath}`} class="btn-secondary">
        {ctaSecondary}
      </a>
    </div>

    <!-- Stats (Technical Data) -->
    <div class="hero-stats hi-4">
      {stats.map((s, i) => (
        <>
          {i > 0 && <div class="hero-stat-divider" aria-hidden="true"></div>}
          <div class="hero-stat">
            <div class="hero-stat-val font-mono tracking-widest">{s.val}</div>
            <div class="hero-stat-label font-mono">{s.label}</div>
          </div>
        </>
      ))}
    </div>

  </div>

  <!-- ── Scroll indicator ─────────────────────────── -->
  <div class="hero-scroll hi-5" aria-hidden="true">
    <div class="hero-scroll-line"></div>
    <span class="font-mono text-[10px] text-amber mt-2 tracking-[0.2em] uppercase">Scroll</span>
  </div>

</section>

<style>
  /* ── Section shell ─────────────────────────── */
  .hero-section {
    position:   relative;
    min-height: 100svh;
    background: var(--color-void);
    overflow:   hidden;
    display:    flex;
    flex-direction: column;
  }

  /* ── Background ────────────────────────────── */
  .hero-bg {
    position: absolute;
    inset:    0;
  }

  /* ── Content wrapper ───────────────────────── */
  .hero-body {
    flex:            1;
    display:         flex;
    flex-direction:  column;
    align-items:     flex-start; /* Left aligned, editorial feel */
    justify-content: center;
    padding:         clamp(6rem, 12vw, 10rem) clamp(1.5rem, 5vw, 5rem);
    max-width:     1440px;
    margin: 0 auto;
    width: 100%;
  }

  /* ── Headline ──────────────────────────────── */
  .hero-headline {
    font-family:    var(--font-display);
    font-size:      clamp(4rem, 10vw, 9rem);
    font-weight:    400;
    letter-spacing: -0.04em;
    line-height:    0.9;
    color:          var(--color-titanium);
    margin-bottom:  2.5rem;
    font-style:     normal;
  }
  .hero-em {
    color:      var(--color-amber);
    font-style: italic;
  }
  .hero-line3 {
    color:      rgba(245, 245, 247, 0.4);
    font-style: normal;
  }

  /* ── Subtitle ──────────────────────────────── */
  .hero-subtitle {
    font-size:      clamp(0.875rem, 1.5vw, 1rem);
    color:          var(--color-steel);
    max-width:      32rem;
    line-height:    1.6;
    margin-bottom:  4rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  /* ── CTAs ──────────────────────────────────── */
  .hero-ctas {
    display:     flex;
    flex-wrap:   wrap;
    gap:         1.5rem;
    align-items: center;
    margin-bottom: 5rem;
  }

  /* ── Stats ─────────────────────────────────── */
  .hero-stats {
    display:     flex;
    align-items: center;
    gap:         3rem;
  }
  .hero-stat {
    text-align: left;
  }
  .hero-stat-val {
    color:          var(--color-amber);
    font-size:      clamp(1.25rem, 3vw, 1.5rem);
    line-height:    1;
    margin-bottom:  0.5rem;
    font-weight: 700;
  }
  .hero-stat-label {
    font-size:      0.65rem;
    font-weight:    700;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color:          var(--color-steel);
  }
  .hero-stat-divider {
    width:      1px;
    height:     2.5rem;
    background: var(--color-machined);
  }

  /* ── Scroll line ───────────────────────────── */
  .hero-scroll {
    position:   absolute;
    bottom:     2.5rem;
    right:      clamp(1.5rem, 5vw, 5rem);
    z-index:    30;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .hero-scroll-line {
    width:       1px;
    height:      4rem;
    background:  var(--color-machined);
    position: relative;
    overflow: hidden;
  }
  .hero-scroll-line::after {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; height: 50%;
    background: var(--color-amber);
    animation: scrollDrop 2s cubic-bezier(0.16, 1, 0.3, 1) infinite;
  }

  @keyframes scrollDrop {
    0% { transform: translateY(-100%); }
    60%, 100% { transform: translateY(200%); }
  }

  /* ── Hero item entrance animation ─────────── */
  .hi-1, .hi-2, .hi-3, .hi-4, .hi-5 {
    animation:  heroItem 1.2s cubic-bezier(0.16, 1, 0.3, 1) both;
    will-change: transform, opacity;
  }
  .hi-1 { animation-delay: 0.1s; }
  .hi-2 { animation-delay: 0.25s; }
  .hi-3 { animation-delay: 0.4s; }
  .hi-4 { animation-delay: 0.55s; }
  .hi-5 { animation-delay: 0.8s; }

  @keyframes heroItem {
    from {
      opacity:   0;
      transform: translateY(24px);
    }
    to {
      opacity:   1;
      transform: translateY(0);
    }
  }

  /* ── Flying Bee Animation ─────────────────────────── */
  .hero-flying-bee {
    position: absolute;
    top: 25%;
    left: -10%;
    z-index: 25;
    animation: flyAcross 20s cubic-bezier(0.45, 0, 0.55, 1) infinite;
    opacity: 0.8;
    pointer-events: none;
    filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5));
  }
  
  @keyframes flyAcross {
    0%   { transform: translate(0, 0) rotate(15deg); }
    15%  { transform: translate(20vw, -10vh) rotate(-5deg); }
    35%  { transform: translate(45vw, 5vh) rotate(10deg); }
    60%  { transform: translate(75vw, -15vh) rotate(-15deg); }
    85%  { transform: translate(110vw, 5vh) rotate(10deg); }
    100% { transform: translate(130vw, 0) rotate(15deg); }
  }

  /* ── Mobile adjustments ────────────────────── */
  @media (max-width: 480px) {
    .hero-stats { gap: 1.5rem; flex-wrap: wrap; }
    .hero-ctas  { flex-direction: column; width: 100%; max-width: none; align-items: stretch; }
  }
</style>
